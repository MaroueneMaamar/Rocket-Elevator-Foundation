<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>GEOLOCATION</title>
    </head>
    <body>
        <font color="blue"><b><h1 align=center>MAP of our clients</h1></b></font>
        <br><br><br><br>
        <div class="container geo-container">

            
                <div id="map" style='width: 950px; height: 950px;'>

                    
                
                </div>
        </div>
        



    </body>
</html>

<script src="//maps.google.com/maps/api/js?key=AIzaSyC49pUApXMFvz6fQXeG4MhhQEA2CGrB2SA"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script>


<script>
    document.addEventListener('DOMContentLoaded', (event) => {
         mapInitialisation();
    })

    function mapOptions(){
        return {
            mapTypeControl: true,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
                position: google.maps.ControlPosition.TOP_CENTER
            },
            zoomControl: true,
            zoomControlOptions: {
                position: google.maps.ControlPosition.LEFT_CENTER
            },
            scaleControl: true,
            streetViewControl: true,
            streetViewControlOptions: {
                position: google.maps.ControlPosition.LEFT_TOP
            },
            fullscreenControl: true
        }
    }

    function mapInitialisation(){

            handler = Gmaps.build('Google');
            handler.buildMap({
                provider: {
                disableDefaultUI: true
                },
                internal: {
                id: 'map'
                }
            },
            function(){
                
                // markers = handler.addMarkers([
                // {
                //     "lat": 46.0632019,
                //     "lng": -70.9386751,
                    
                //     "picture": {
                //     "url": "http://people.mozilla.com/~faaborg/files/shiretoko/firefoxIcon/firefox-32.png",
                //     "width":  32,
                //     "height": 32
                //     },
                //     "infowindow": "hello!"
                // }
                // ]);
                var mapCenter = {
                    "lat": 46.0632019,
                    "lng": -70.9386751,
                }
                
                handler.fitMapToBounds();
                handler.getMap().setOptions(mapOptions())
                handler.getMap().setZoom(4)
                handler.getMap().setCenter(mapCenter)
                markers = handler.addMarkers(<%=raw @hash.to_json %>);
                handler.bounds.extendWith(markers);
            }
        );

            

    }
    
</script>